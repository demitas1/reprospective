# Reprospective Host Agent 設定ファイル
# このファイルはバージョン管理にコミットしないでください

# データベース設定
database:
  # SQLiteデータベースパス（環境変数 SQLITE_DESKTOP_PATH, SQLITE_FILE_EVENTS_PATH で上書き可能）
  desktop_activity:
    path: data/desktop_activity.db
  file_changes:
    path: data/file_changes.db

  # PostgreSQL接続設定（非推奨: 環境変数に移行しました）
  # 以下の設定は環境変数 DATABASE_URL または DB_HOST, DB_PORT, DB_NAME, DB_USER, DB_PASSWORD で指定してください
  # 詳細は host-agent/README.md および プロジェクトルート/env.example を参照
  # postgres_url: "postgresql://reprospective_user:change_this_password@localhost:6000/reprospective"

# データ同期設定
data_sync:
  enabled: true                # 同期機能有効化
  interval_seconds: 300        # 同期間隔（デフォルト5分）
  batch_size: 100              # バッチサイズ
  max_retries: 5               # 最大リトライ回数
  retry_backoff_seconds: 30    # リトライ間隔（指数バックオフ）

# デスクトップアクティビティ監視設定
desktop_monitor:
  enabled: true
  monitor_interval: 10  # 監視間隔（秒）

# ファイルシステム監視設定
filesystem_watcher:
  enabled: true

  # 監視対象ディレクトリ（明示的に指定）
  monitored_directories:
    - /mnt/ext-ssd1/work/github.com/reprospective

  # シンボリックリンクの扱い
  symlinks:
    follow: false  # シンボリックリンクを追跡しない（推奨）

  # 除外パターン（正規表現）
  exclude_patterns:
    - ".*\\.tmp$"
    - ".*\\.swp$"
    - ".*~$"
    - ".*/node_modules/.*"
    - ".*/__pycache__/.*"
    - ".*/\\.git/.*"
    - ".*/\\.venv/.*"
    - ".*/venv/.*"
    - ".*/build/.*"
    - ".*/dist/.*"
    - ".*/target/.*"
    - ".*\\.log$"
    - ".*/data/.*"  # データベースファイルなど

  # バッファ設定
  buffer:
    max_events: 100      # バッファ最大イベント数
    flush_interval: 10   # フラッシュ間隔（秒）

# ログ設定
logging:
  level: INFO
  format: "[%(asctime)s] [%(levelname)s] [%(name)s] %(message)s"
